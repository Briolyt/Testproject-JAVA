name: Run project test

on: push 
jobs:
  test:
    runs-on: ubuntu-latest

    steps:
    - name: Checkout this repo
      uses: actions/checkout@v2
      with:
        ref: ${{ github.ref }}

    - name: Run tests
      run: mvn clean test

  build:
    runs-on: ubuntu-latest

    - name: Checkout this repo
      uses: actions/checkout@v2
      with:
        ref: ${{ github.ref }}

    steps:
    - name: Run build
      run: mvn install -f initial/pom.xml -DskipTests -Ddbtype=postgresql

